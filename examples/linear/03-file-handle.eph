// SPDX-License-Identifier: PMPL-1.0-or-later
// Linear: File handle safety
// Linear types prevent use-after-close bugs

fn open_file(path: String) -> linear File {
    // Open file and return linear handle
    File::open(path)
}

fn close_file(f: linear File) {
    // Consume the file handle
    f.close()
}

fn main() -> i32 {
    let f: linear File = open_file("data.txt");
    close_file(f)  // f consumed
    // f.read()  // ERROR: f already closed
    0
}
