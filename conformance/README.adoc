// SPDX-License-Identifier: PMPL-1.0-or-later
// SPDX-FileCopyrightText: 2025 Jonathan D.A. Jewell
= Conformance Test Corpus

This directory contains conformance tests for the Ephapax type checker.

== Structure

[source]
----
conformance/
├── pass/          # Programs that should type-check successfully
└── fail/          # Programs with deliberate type errors
----

== Test Format

Each `.eph` file contains a single Ephapax program.

=== Pass Tests

Programs in `pass/` must:

- Parse without errors
- Type-check without errors
- Demonstrate correct usage of linearity, regions, and borrowing

=== Fail Tests

Programs in `fail/` must:

- Parse successfully (syntax is valid)
- Fail type-checking with a specific error

Each fail test file should contain a comment indicating the expected error category.

== Running Tests

[source,bash]
----
just conformance
----

== Test Categories

=== Pass Categories

- Region allocation and deallocation
- Borrowing for read-only access
- Linear value consumption
- Product/pair construction and destructuring
- Sum/variant construction and matching

=== Fail Categories

- `double-use` - Using a linear value twice
- `use-after-consume` - Using a value after it was consumed
- `escaping-region` - Returning a region-scoped value
- `illegal-copy` - Copying a linear type
- `borrow-escape` - Borrow outliving its scope
