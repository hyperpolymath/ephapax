// SPDX-License-Identifier: PMPL-1.0-or-later
// Linear: Network socket management
// Ensures sockets are properly closed

fn connect(addr: String) -> linear Socket {
    Socket::connect(addr)
}

fn send_and_close(sock: linear Socket, data: String) {
    sock.send(data);
    sock.close();  // Linear type forces close
}

fn main() -> i32 {
    let sock: linear Socket = connect("127.0.0.1:8080");
    send_and_close(sock, "Hello, server!");
    0
}
